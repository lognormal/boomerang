<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<title>Boomerang Tutorial: Header Snippets</title>

	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<link type="text/css" rel="stylesheet" href="styles/sunlight.default.css">

	<link type="text/css" rel="stylesheet" href="styles/site.akamai.css">

</head>

<body>

<div class="navbar navbar-default navbar-fixed-top ">
<div class="container">
	<div class="navbar-header">
		<a class="navbar-brand" href="index.html">Boomerang</a>
		<button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#topNavigation">
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
        </button>
	</div>
	<div class="navbar-collapse collapse" id="topNavigation">
		<ul class="nav navbar-nav">
			
			<li class="dropdown">
				<a href="classes.list.html" class="dropdown-toggle" data-toggle="dropdown">Classes<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="BOOMR.html">BOOMR</a></li><li><a href="BOOMR.browser.html">BOOMR.browser</a></li><li><a href="BOOMR.constants.html">BOOMR.constants</a></li><li><a href="BOOMR.plugins.html">BOOMR.plugins</a></li><li><a href="BOOMR.plugins.AutoXHR.html">BOOMR.plugins.AutoXHR</a></li><li><a href="BOOMR.plugins.BW.html">BOOMR.plugins.BW</a></li><li><a href="BOOMR.plugins.CACHE_RELOAD.html">BOOMR.plugins.CACHE_RELOAD</a></li><li><a href="BOOMR.plugins.Clicks.html">BOOMR.plugins.Clicks</a></li><li><a href="BOOMR.plugins.ConsentInlinedPlugin.html">BOOMR.plugins.ConsentInlinedPlugin</a></li><li><a href="BOOMR.plugins.Continuity.html">BOOMR.plugins.Continuity</a></li><li><a href="BOOMR.plugins.CT.html">BOOMR.plugins.CT</a></li><li><a href="BOOMR.plugins.DNS.html">BOOMR.plugins.DNS</a></li><li><a href="BOOMR.plugins.Early.html">BOOMR.plugins.Early</a></li><li><a href="BOOMR.plugins.Errors.html">BOOMR.plugins.Errors</a></li><li><a href="BOOMR.plugins.EventTiming.html">BOOMR.plugins.EventTiming</a></li><li><a href="BOOMR.plugins.GUID.html">BOOMR.plugins.GUID</a></li><li><a href="BOOMR.plugins.History.html">BOOMR.plugins.History</a></li><li><a href="BOOMR.plugins.IFrameDelay.html">BOOMR.plugins.IFrameDelay</a></li><li><a href="BOOMR.plugins.IPv6.html">BOOMR.plugins.IPv6</a></li><li><a href="BOOMR.plugins.Memory.html">BOOMR.plugins.Memory</a></li><li><a href="BOOMR.plugins.Mobile.html">BOOMR.plugins.Mobile</a></li><li><a href="BOOMR.plugins.NavigationTiming.html">BOOMR.plugins.NavigationTiming</a></li><li><a href="BOOMR.plugins.PaintTiming.html">BOOMR.plugins.PaintTiming</a></li><li><a href="BOOMR.plugins.ResourceTiming.html">BOOMR.plugins.ResourceTiming</a></li><li><a href="BOOMR.plugins.RT.html">BOOMR.plugins.RT</a></li><li><a href="BOOMR.plugins.SPA.html">BOOMR.plugins.SPA</a></li><li><a href="BOOMR.plugins.TPAnalytics.html">BOOMR.plugins.TPAnalytics</a></li><li><a href="BOOMR.plugins.UserTiming.html">BOOMR.plugins.UserTiming</a></li><li><a href="BOOMR.session.html">BOOMR.session</a></li><li><a href="BOOMR.utils.html">BOOMR.utils</a></li><li><a href="BOOMR.utils.Compression.html">BOOMR.utils.Compression</a></li><li><a href="BOOMR_mq.html">BOOMR_mq</a></li><li><a href="MutationHandler.html">MutationHandler</a></li><li><a href="ProxyXHRImplementation.html">ProxyXHRImplementation</a></li>
				</ul>
			</li>
			
			<li class="dropdown">
				<a href="events.list.html" class="dropdown-toggle" data-toggle="dropdown">Events<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="BOOMR.html#event:beacon">BOOMR#event:beacon</a></li><li><a href="BOOMR.html#event:before_beacon">BOOMR#event:before_beacon</a></li><li><a href="BOOMR.html#event:before_early_beacon">BOOMR#event:before_early_beacon</a></li><li><a href="BOOMR.html#event:before_unload">BOOMR#event:before_unload</a></li><li><a href="BOOMR.html#event:click">BOOMR#event:click</a></li><li><a href="BOOMR.html#event:config">BOOMR#event:config</a></li><li><a href="BOOMR.html#event:dom_loaded">BOOMR#event:dom_loaded</a></li><li><a href="BOOMR.html#event:error">BOOMR#event:error</a></li><li><a href="BOOMR.html#event:form_submit">BOOMR#event:form_submit</a></li><li><a href="BOOMR.html#event:netinfo">BOOMR#event:netinfo</a></li><li><a href="BOOMR.html#event:page_load_beacon">BOOMR#event:page_load_beacon</a></li><li><a href="BOOMR.html#event:page_ready">BOOMR#event:page_ready</a></li><li><a href="BOOMR.html#event:page_unload">BOOMR#event:page_unload</a></li><li><a href="BOOMR.html#event:prerender_to_visible">BOOMR#event:prerender_to_visible</a></li><li><a href="BOOMR.html#event:rage_click">BOOMR#event:rage_click</a></li><li><a href="BOOMR.html#event:spa_cancel">BOOMR#event:spa_cancel</a></li><li><a href="BOOMR.html#event:spa_init">BOOMR#event:spa_init</a></li><li><a href="BOOMR.html#event:spa_navigation">BOOMR#event:spa_navigation</a></li><li><a href="BOOMR.html#event:visibility_changed">BOOMR#event:visibility_changed</a></li><li><a href="BOOMR.html#event:xhr_error">BOOMR#event:xhr_error</a></li><li><a href="BOOMR.html#event:xhr_init">BOOMR#event:xhr_init</a></li><li><a href="BOOMR.html#event:xhr_load">BOOMR#event:xhr_load</a></li><li><a href="BOOMR.html#event:xhr_send">BOOMR#event:xhr_send</a></li><li><a href="document.html#event:onBeforeBoomerangBeacon">document#event:onBeforeBoomerangBeacon</a></li><li><a href="document.html#event:onBoomerangBeacon">document#event:onBoomerangBeacon</a></li><li><a href="document.html#event:onBoomerangLoaded">document#event:onBoomerangLoaded</a></li>
				</ul>
			</li>
			
			<li class="dropdown">
				<a href="tutorials.list.html" class="dropdown-toggle" data-toggle="dropdown">Tutorials<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="tutorial-README.template.html">README.template</a></li><li><a href="tutorial-building.html">Building</a></li><li><a href="tutorial-contributing.html">Contributing</a></li><li><a href="tutorial-creating-plugins.html">Creating Plugins</a></li><li><a href="tutorial-header-snippets.html">Header Snippets</a></li><li><a href="tutorial-howtos.html">How-Tos</a></li><li><a href="tutorial-loader-snippet.html">Non-Blocking Loader Snippet</a></li><li><a href="tutorial-methodology.html">Methodology</a></li><li><a href="tutorial-page-overrides.html">Page Overrides</a></li><li><a href="tutorial-perf-tests.html">Performance Tests</a></li><li><a href="tutorial-tests.html">Tests</a></li><li><a href="tutorial-version-history.html">Version History</a></li>
				</ul>
			</li>
			
			<li class="dropdown">
				<a href="global.html" class="dropdown-toggle" data-toggle="dropdown">Global<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="global.html#BOOMR_check_doc_domain">BOOMR_check_doc_domain</a></li><li><a href="global.html#BOOMR_lstart">BOOMR_lstart</a></li><li><a href="global.html#BOOMR_onload">BOOMR_onload</a></li><li><a href="global.html#BOOMR_start">BOOMR_start</a></li>
				</ul>
			</li>
			
		</ul>
        
            <div class="col-sm-3 col-md-3">
                <form class="navbar-form" role="search">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Search" name="q" id="search-input">
                        <div class="input-group-btn">
                            <button class="btn btn-default" id="search-submit"><i class="glyphicon glyphicon-search"></i></button>
                        </div>
                    </div>
                </form>
            </div>
        
	</div>

</div>
</div>


<div class="container" id="toc-content">
<div class="row">

	
	<div class="col-md-12">
	
		<div id="main">
			<section class="tutorial-section">

<header>
    <h1>Header Snippets</h1>
</header>

<article>
    <p>Header Snippets are small pieces of JavaScript code that can be injected into a Page's HTML so that even before Boomerang loads, components of the page load experience (such as JavaScript errors) are still fully measured.</p>
<p>These Header Snippets should be added as inline <code>&lt;script&gt;</code> tags within the <code>&lt;head&gt;</code> of a document, ideally right before the <a href="tutorial-loader-snippet.html">Non-Blocking Loader Snippet</a> is included.</p>
<h2>JavaScript Errors (for <a href="BOOMR.plugins.Errors.html"><code>BOOMR.plugins.Errors</code></a>)</h2>
<p>Boomerang listens for JavaScript errors via the <a href="BOOMR.plugins.Errors.html"><code>BOOMR.plugins.Errors</code></a> plugin by monitoring the <a href="https://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers/onerror"><code>onerror</code></a>
global event handler.  However, JavaScript errors that occur prior to Boomerang being loaded will be missed.</p>
<p>This Errors Snippet monitors for JavaScript Errors via the <a href="https://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers/onerror"><code>onerror</code></a>
event and will &quot;hand off&quot; the errors to Boomerang once it has loaded.</p>
<p>Source:</p>
<pre class="prettyprint source lang-javascript"><code>&lt;script>
(function(w){
	w.BOOMR = w.BOOMR || {};

	w.BOOMR.globalOnErrorOrig = w.BOOMR.globalOnError = w.onerror;
	w.BOOMR.globalErrors = [];

	// Gathers a high-resolution timestamp (when available), or falls back to Date.getTime()
	var now = (function() {
		try {
			if (&quot;performance&quot; in w &amp;&amp; w.performance.timing) {
				return function() {
					return Math.round(w.performance.now() + performance.timing.navigationStart);
				};
			}
		}
		catch (ignore) {
			// NOP
		}

		return Date.now || function() {
			return new Date().getTime();
		};
	})();

	// Overwrite the global onerror to listen for errors, but forward all messages to the original one if it exists
	w.onerror = function BOOMR_plugins_errors_onerror(message, fileName, lineNumber, columnNumber, error) {
		if (w.BOOMR.version) {
			// If Boomerang has already loaded, the only reason this function would still be alive would be if
			// we're in the chain from another handler that overwrote window.onerror.  In that case, we should
			// run globalOnErrorOrig which presumably hasn't been overwritten by Boomerang.
			if (typeof w.BOOMR.globalOnErrorOrig === &quot;function&quot;) {
				w.BOOMR.globalOnErrorOrig.apply(w, arguments);
			}

			return;
		}

		// Save this error for when Boomerang loads
		if (typeof error !== &quot;undefined&quot; &amp;&amp; error !== null) {
			error.timestamp = now();
			w.BOOMR.globalErrors.push(error);
		}
		else {
			w.BOOMR.globalErrors.push({
				message: message,
				fileName: fileName,
				lineNumber: lineNumber,
				columnNumber: columnNumber,
				noStack: true,
				timestamp: now()
			});
		}

		// Call the original window.onerror
		if (typeof w.BOOMR.globalOnError === &quot;function&quot;) {
			w.BOOMR.globalOnError.apply(w, arguments);
		}
	};

	// make it easier to detect this is our wrapped handler
	w.onerror._bmr = true;
})(window);
&lt;/script>
</code></pre>
<p>Minified:</p>
<pre class="prettyprint source lang-javascript"><code>&lt;script>(function(i){i.BOOMR=i.BOOMR||{};i.BOOMR.globalOnErrorOrig=i.BOOMR.globalOnError=i.onerror;i.BOOMR.globalErrors=[];var a=function(){try{if(&quot;performance&quot;in i&amp;&amp;i.performance.timing){return function(){return Math.round(i.performance.now()+performance.timing.navigationStart)}}}catch(r){}return Date.now||function(){return(new Date).getTime()}}();i.onerror=function r(n,o,e,t,O){if(i.BOOMR.version){if(typeof i.BOOMR.globalOnErrorOrig===&quot;function&quot;){i.BOOMR.globalOnErrorOrig.apply(i,arguments)}return}if(typeof O!==&quot;undefined&quot;&amp;&amp;O!==null){O.timestamp=a();i.BOOMR.globalErrors.push(O)}else{i.BOOMR.globalErrors.push({message:n,fileName:o,lineNumber:e,columnNumber:t,noStack:true,timestamp:a()})}if(typeof i.BOOMR.globalOnError===&quot;function&quot;){i.BOOMR.globalOnError.apply(i,arguments)}};i.onerror._bmr=true})(window);&lt;/script>
</code></pre>
<h2>Frame Rate (for <a href="BOOMR.plugins.Continuity.html"><code>BOOMR.plugins.Continuity</code></a>)</h2>
<p>The <a href="BOOMR.plugins.Continuity.html"><code>BOOMR.plugins.Continuity</code></a> plugin measures performance and user experience metrics beyond just the
traditional Page Load timings.</p>
<p>One of the metrics that the <a href="BOOMR.plugins.Continuity.html"><code>BOOMR.plugins.Continuity</code></a> plugin measures is Frame Rate (FSP) data via
<a href="https://developer.mozilla.org/en-US/docs/Web/API/window/requestAnimationFrame"><code>requestAnimationFrame</code></a>.  However,
FPS data is &quot;real-time&quot; and is not available for scripts like Boomerang that may load later in the page load process.</p>
<p>This Header Snippet will start monitoring
<a href="https://developer.mozilla.org/en-US/docs/Web/API/window/requestAnimationFrame"><code>requestAnimationFrame</code></a> and hand the
FPS data off to Boomerang once it has loaded.</p>
<p>Source:</p>
<pre class="prettyprint source lang-javascript"><code>&lt;script>
(function() {
	if (window &amp;&amp; window.requestAnimationFrame) {
		window.BOOMR = window.BOOMR || {};
		window.BOOMR.fpsLog = [];

		function frame(now) {
			// window.BOOMR.fpsLog will get deleted once Boomerang has loaded
			if (window.BOOMR.fpsLog) {
				window.BOOMR.fpsLog.push(Math.round(now));

				// if we've added more than 30 seconds of data, stop
				if (window.BOOMR.fpsLog.length &gt; 30 * 60) {
					return;
				}

				window.requestAnimationFrame(frame);
			}
		}

		window.requestAnimationFrame(frame);
	}
})();
&lt;/script>
</code></pre>
<p>Minified:</p>
<pre class="prettyprint source lang-javascript"><code>&lt;script>(function(){if(window&amp;&amp;window.requestAnimationFrame){window.BOOMR=window.BOOMR||{};window.BOOMR.fpsLog=[];function i(n){if(window.BOOMR.fpsLog){window.BOOMR.fpsLog.push(Math.round(n));if(window.BOOMR.fpsLog.length&gt;30*60){return}window.requestAnimationFrame(i)}}window.requestAnimationFrame(i)}})();&lt;/script>
</code></pre>
<h2>Instrumenting XMLHttpRequests (for <a href="BOOMR.plugins.AutoXHR.html"><code>BOOMR.plugins.AutoXHR</code></a>)</h2>
<p>The <a href="BOOMR.plugins.AutoXHR.html"><code>BOOMR.plugins.AutoXHR</code></a> plugin monitors <code>XMLHttpRequests</code> on the page.</p>
<p>The performance data of <code>XMLHttpRequests</code> that start before Boomerang is loaded may not be monitored.</p>
<p>This Header Snippet will start monitoring <code>XMLHttpRequests</code> and hand the performance data off to Boomerang once it
has loaded.</p>
<p>Source:</p>
<pre class="prettyprint source lang-javascript"><code>&lt;script>
(function(w){
	if (!w.XMLHttpRequest || !(new w.XMLHttpRequest()).addEventListener) {
		return;
	}

	var a = document.createElement(&quot;A&quot;),
	    xhrNative = w.XMLHttpRequest,
	    resources = [],
	    sendResource,
	    readyStateMap = [&quot;uninitialized&quot;, &quot;open&quot;, &quot;responseStart&quot;, &quot;domInteractive&quot;, &quot;responseEnd&quot;];

	w.BOOMR = w.BOOMR || {};

	// xhr object is what the AutoXHR plugin will interact with once it's loaded
	BOOMR.xhr = {
		/**
		 * Stops XHR collection and forwards any additional reporting to Boomerang
		 *
		 * @param {function} sendResourceCallback Callback for any ongoing monitoring
		 *
		 * @returns {object} Array of XHRs
		 */
		stop: function(sendResourceCallback) {
			sendResource = sendResourceCallback;

			// swap back in the native XHR function
			w.XMLHttpRequest = xhrNative;

			delete BOOMR.xhr;

			// clear our queue after a moment
			setTimeout(function(){
				resources = [];
			}, 10);

			return resources;
		}
	};

	// Gathers a high-resolution timestamp (when available), or falls back to Date.getTime()
	var now = (function() {
		try {
			if (&quot;performance&quot; in w &amp;&amp; w.performance.timing) {
				return function() {
					return Math.round(w.performance.now() + performance.timing.navigationStart);
				};
			}
		}
		catch (ignore) {
			// NOP
		}

		return Date.now || function() {
			return new Date().getTime();
		};
	})();

	// Overwrite the native XHR with our monitored object
	w.XMLHttpRequest = function() {
		var xhr = new xhrNative(),
		    open = xhr.open;

		xhr.open = function(method, url, async) {
			// Normalize the URL
			a.href = url;

			var resource = {
				timing: {},
				url: a.href,
				method: method
			};

			// Callback when the XHR is finished
			function loadFinished() {
				if (!resource.timing.loadEventEnd) {
					resource.timing.loadEventEnd = now();

					if (&quot;performance&quot; in w &amp;&amp; w.performance &amp;&amp; typeof w.performance.getEntriesByName === &quot;function&quot;) {
						var entries = w.performance.getEntriesByName(resource.url);

						var entry = entries &amp;&amp; entries.length &amp;&amp; entries[entries.length - 1];

						if (entry) {
							var navSt = w.performance.timing.navigationStart;

							if (entry.responseEnd !== 0) {
								resource.timing.responseEnd = Math.round(navSt + entry.responseEnd);
							}
							if (entry.responseStart !== 0) {
								resource.timing.responseStart = Math.round(navSt + entry.responseStart);
							}
							if (entry.startTime !== 0) {
								resource.timing.requestStart = Math.round(navSt + entry.startTime);
							}
						}
					}

					if (sendResource) {
						sendResource(resource);
					}
					else {
						resources.push(resource);
					}
				}
			}

			function addListener(ename, stat) {
				xhr.addEventListener(
					ename,
					function() {
						if (ename === &quot;readystatechange&quot;) {
							resource.timing[readyStateMap[xhr.readyState]] = now();
							if (xhr.readyState === 4) {
								loadFinished();
							}
						}
						else {
							resource.status = (stat === undefined ? xhr.status : stat);
							loadFinished();
						}
					},
					false);
			}

			if (async === true) {
				addListener(&quot;readystatechange&quot;);
			}
			else {
				resource.synchronous = true;
			}

			addListener(&quot;load&quot;);
			addListener(&quot;timeout&quot;, -1001);
			addListener(&quot;error&quot;,   -998);
			addListener(&quot;abort&quot;,   -999);

			try {
				open.apply(xhr, arguments);

				var send = xhr.send;

				xhr.send = function() {
					resource.timing.requestStart = now();

					send.apply(xhr, arguments);
				};
			}
			catch (e) {
				resource.status = -997;

				loadFinished();
			}
		};
		return xhr;
	};
})(window);
&lt;/script>
</code></pre>
<p>Minified:</p>
<pre class="prettyprint source lang-javascript"><code>&lt;script>(function(f){if(!f.XMLHttpRequest||!(new f.XMLHttpRequest).addEventListener){return}var c=document.createElement(&quot;A&quot;),t=f.XMLHttpRequest,p=[],d,m=[&quot;uninitialized&quot;,&quot;open&quot;,&quot;responseStart&quot;,&quot;domInteractive&quot;,&quot;responseEnd&quot;];f.BOOMR=f.BOOMR||{};BOOMR.xhr={stop:function(e){d=e;f.XMLHttpRequest=t;delete BOOMR.xhr;setTimeout(function(){p=[]},10);return p}};var g=function(){try{if(&quot;performance&quot;in f&amp;&amp;f.performance.timing){return function(){return Math.round(f.performance.now()+performance.timing.navigationStart)}}}catch(e){}return Date.now||function(){return(new Date).getTime()}}();f.XMLHttpRequest=function(){var s=new t,u=s.open;s.open=function(e,t,n){c.href=t;var r={timing:{},url:c.href,method:e};function i(){if(!r.timing.loadEventEnd){r.timing.loadEventEnd=g();if(&quot;performance&quot;in f&amp;&amp;f.performance&amp;&amp;typeof f.performance.getEntriesByName===&quot;function&quot;){var e=f.performance.getEntriesByName(r.url);var t=e&amp;&amp;e.length&amp;&amp;e[e.length-1];if(t){var n=f.performance.timing.navigationStart;if(t.responseEnd!==0){r.timing.responseEnd=Math.round(n+t.responseEnd)}if(t.responseStart!==0){r.timing.responseStart=Math.round(n+t.responseStart)}if(t.startTime!==0){r.timing.requestStart=Math.round(n+t.startTime)}}}if(d){d(r)}else{p.push(r)}}}function a(e,t){s.addEventListener(e,function(){if(e===&quot;readystatechange&quot;){r.timing[m[s.readyState]]=g();if(s.readyState===4){i()}}else{r.status=t===undefined?s.status:t;i()}},false)}if(n===true){a(&quot;readystatechange&quot;)}else{r.synchronous=true}a(&quot;load&quot;);a(&quot;timeout&quot;,-1001);a(&quot;error&quot;,-998);a(&quot;abort&quot;,-999);try{u.apply(s,arguments);var o=s.send;s.send=function(){r.timing.requestStart=g();o.apply(s,arguments)}}catch(e){r.status=-997;i()}};return s}})(window);&lt;/script>
</code></pre>
</article>



</section>

		</div>
	</div>

	<div class="clearfix"></div>

	

</div>
</div>


    <div class="modal fade" id="searchResults">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title">Search results</h4>
          </div>
          <div class="modal-body"></div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div>


<footer>


	<span class="copyright">
	Â© 2010-2020 the contributors to the Open Source Boomerang project and Akamai Technologies, Inc.
	</span>

<span class="jsdoc-message">
	Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.4</a>
	
		on Wed Sep 30th 2020
	
	using the <a href="https://github.com/docstrap/docstrap">DocStrap template</a>.
</span>
</footer>

<script src="scripts/docstrap.lib.js"></script>
<script src="scripts/toc.js"></script>

    <script type="text/javascript" src="scripts/fulltext-search-ui.js"></script>


<script>
$( function () {
	$( "[id*='$']" ).each( function () {
		var $this = $( this );

		$this.attr( "id", $this.attr( "id" ).replace( "$", "__" ) );
	} );

	$( ".tutorial-section pre, .readme-section pre, pre.prettyprint.source" ).each( function () {
		var $this = $( this );

		var example = $this.find( "code" );
		exampleText = example.html();
		var lang = /{@lang (.*?)}/.exec( exampleText );
		if ( lang && lang[1] ) {
			exampleText = exampleText.replace( lang[0], "" );
			example.html( exampleText );
			lang = lang[1];
		} else {
			var langClassMatch = example.parent()[0].className.match(/lang\-(\S+)/);
			lang = langClassMatch ? langClassMatch[1] : "javascript";
		}

		if ( lang ) {

			$this
			.addClass( "sunlight-highlight-" + lang )
			.addClass( "linenums" )
			.html( example.html() );

		}
	} );

	Sunlight.highlightAll( {
		lineNumbers : true,
		showMenu : true,
		enableDoclinks : true
	} );

	$.catchAnchorLinks( {
        navbarOffset: 10
	} );
	$( "#toc" ).toc( {
		anchorName  : function ( i, heading, prefix ) {
			return $( heading ).attr( "id" ) || ( prefix + i );
		},
		selectors   : "#toc-content h1,#toc-content h2,#toc-content h3",
		showAndHide : false,
		smoothScrolling: true
	} );

	$( "#main span[id^='toc']" ).addClass( "toc-shim" );
	$( '.dropdown-toggle' ).dropdown();

    $( "table" ).each( function () {
      var $this = $( this );
      $this.addClass('table');
    } );

} );
</script>



<!--Navigation and Symbol Display-->


<!--Google Analytics-->



    <script type="text/javascript">
        $(document).ready(function() {
            SearcherDisplay.init();
        });
    </script>


</body>
</html>